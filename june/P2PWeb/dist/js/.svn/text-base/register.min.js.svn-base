"use strict";function draw(e){var a=$("#canvas").width(),t=$("#canvas").height(),o=document.getElementById("canvas"),r=o.getContext("2d");o.width=a,o.height=t;for(var n="a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),i=n.length,s=0;s<4;s++){var d=Math.floor(Math.random()*i),l=Math.random()-.5,m=n[d];e[s]=m.toLowerCase();var g=10+20*s,h=20+8*Math.random();r.font="bold 23px 微软雅黑",r.translate(g,h),r.rotate(l),r.fillStyle=randomColor(),r.fillText(m,0,0),r.rotate(-l),r.translate(-g,-h)}for(s=0;s<=5;s++)r.strokeStyle=randomColor(),r.beginPath(),r.moveTo(Math.random()*a,Math.random()*t),r.lineTo(Math.random()*a,Math.random()*t),r.stroke();for(s=0;s<=30;s++){r.strokeStyle=randomColor(),r.beginPath();g=Math.random()*a,h=Math.random()*t;r.moveTo(g,h),r.lineTo(g+1,h+1),r.stroke()}}function randomColor(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}$(function(){var t=[];draw(t),$("#canvas").on("click",function(){draw(t)}),$("form").on("submit",function(){var e=$(".input-val").val().toLowerCase(),a=t.join("");if(""==e)$("#py-verification").addClass("text-danger"),$("#py-error").text("请输入验证码！");else{if(e==a)return $("#py-verification").removeClass("text-danger"),$("#py-error").hide(),!0;$("#py-verification").addClass("text-danger"),$("#py-error").text("验证码错误！请重新输入"),$(".input-val").val("")}})}),$(function(){$("form").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"用户名长度必须在6到18位之间"},regexp:{regexp:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含大写、小写、数字和下划线"}}},phone:{message:"电话号码验证失败",validators:{notEmpty:{message:"电话号码不能为空"},regexp:{regexp:/^1[34578]\d{9}$/,message:"电话号码格式错误"}}},pwd:{message:"密码验证失败",validators:{notEmpty:{message:"密码不能为空"},different:{field:"username",message:"密码不能和用户名一样"},identical:{field:"confirmpwd",message:"两次输入密码不一样"},regexp:{regexp:/^(\w){6,20}$/,message:"只能输入6-20个字母、数字、下划线  "}}},confirmpwd:{validators:{notEmpty:{message:"确认密码不能为空"},identical:{field:"pwd",message:"两次输入密码不一样"}}}},submitHandler:function(e,a,t){alert("submit")}})});